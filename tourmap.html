<!--

Great, you found me!

Let me tell you a story about Wahlkampf.
Wahlkampf is one of the best things that could ever happen to you.
It's the possibility to fight for an idea you think is right and good and makes the world a better place.
It's the possibility to fight without weapons and blood, but rather with ideas and words.
It's the possibility to find a tribe of like-minded people and engage with them in the greatest challenge of our time,
of every time: Hopefully contribute just a little bit to the betterment of the world.

So what does Wahlkampf feel like?

It Wednesday, 4th October 8:44pm. You listen to Southern Gothic and are at the beginning of yet another epic journey.
Create an awesome final website for the election campaign. A live coverage of the last 36 hours of the top candidate
of your party.

1. Stationen
2. Challenges
2a. Forms
2b. Workflows
3. Zugticket
4. Live-Videos
5. Hashtagstream
6. Styling


-->
<!DOCTYPE html>
<html>
<head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
        #map {
            height: 100%;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        .map-box {
            width: 200px;
        }
    </style>
</head>
<body>
<div id="map"></div>
<script>
    var map;
    function initMap() {

        var markerArray = [];

        map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: 47.6746209, lng: 13.5},
            zoom: 8
        });

        var styles = [
            /*{
                "featureType": "all",
                "stylers": [
                    { "color": "#C0C0C0" }
                ]
            },*/
            {
                featureType: "transit",
                elements: "all",
                stylers: [
                    {
                        //visibility: "off",
                        color: "#e84188"
                    }
                ]
            }
        ];

        map.setOptions({styles: styles});


        var geocoder = new google.maps.Geocoder();
        var address = "St. Pölten";
        geocoder.geocode({'address': address}, function(results, status) {
            if (status === 'OK') {
                var foo = results[0].geometry.location;
                var lat = foo.lat();
                var lng = foo.lng();
                resultsMap.setCenter(foo);
                var marker = new google.maps.Marker({
                    map: resultsMap,
                    position: results[0].geometry.location
                });
            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        });

        var position_wien = {
            title: "Wien",
            position: {lat: 48.2081743, lng: 16.3738189},
            html: '<div class="map-box"><h2>Mat legt los</h2><p>36 Stunden durch ganz Österreich und du bist live dabei.</p><a href="https://neos.eu">Zur Challenge</a></div>'
        };
        var position_dornbirn = {
            title: "Dornbirn",
            position: {lat: 47.4124, lng: 9.74379},
            html: '<p>test2</p>'
        };
        var position_salzburg = {
            title: "Salzburg",
            position: {lat: 47.80949, lng: 13.05501},
            html: '<p>test3</p>'
        };
        var position_graz = {
            title: "Graz",
            position: {lat: 47.070714, lng: 15.439503999999943},
            html: '<p>test4</p>'
        };
        var position_stpoelten = {
            title: "St. Pölten",
            position: {lat: 48.20353, lng: 15.63817},
            html: '<p>test5</p>'
        };

        var positions = [position_wien, position_dornbirn, position_salzburg, position_graz, position_stpoelten];



        var markers = [];
        for(var i = 0; i < positions.length; i++){
            var marker= new google.maps.Marker({
                position: positions[i].position,
                map: map,
                title: positions[i].title
            });



            var infowindow = new google.maps.InfoWindow({content:positions[i].html});
            infowindow.open(map, marker);
/*
            marker.addListener('click', function() {
                this.infowindow = new google.maps.InfoWindow({content:this.content});
                this.infowindow.open(map, this);
            });
            */

            markers[i] = marker;
        }


        // Routing

        var directionsService = new google.maps.DirectionsService;
        var directionsDisplay = new google.maps.DirectionsRenderer({map: map});
/*
        // Display the route between the initial start and end selections.
        window.setTimeout(function(){
            calculateAndDisplayRoute(
                    directionsDisplay, "Wien, Österreich", "Dornbirn, Österreich");

        }, 1000);

        window.setTimeout(function(){

            calculateAndDisplayRoute(
                    directionsDisplay, "Dornbirn, Österreich", "Innsbruck, Österreich");

        }, 2000);
        window.setTimeout(function(){

            calculateAndDisplayRoute(
                    directionsDisplay, "Innsbruck, Österreich", "Salzburg, Österreich");

        }, 3000);
        window.setTimeout(function(){

            calculateAndDisplayRoute(
                    directionsDisplay, "Salzburg, Österreich", "Linz, Österreich");

        }, 4000);
        window.setTimeout(function(){

            calculateAndDisplayRoute(
                    directionsDisplay, "Linz, Österreich", "Wien, Österreich");

        }, 5000);

        window.setTimeout(function(){

            calculateAndDisplayRoute(
                    directionsDisplay, "Graz, Österreich", "Salzburg, Österreich");

        }, 6000);
*/


        function calculateAndDisplayRoute(directionsDisplay, origin, destination, waypoints) {
            // First, remove any existing markers from the map.
            for (var i = 0; i < markerArray.length; i++) {
                markerArray[i].setMap(null);
            }

            // Retrieve the start and end locations and create a DirectionsRequest using
            // WALKING directions.
            directionsService.route({
                origin: origin,
                destination: destination,
                waypoints: waypoints,
                travelMode: 'TRANSIT',
                transitOptions: {modes:["RAIL"]}
            }, function(response, status) {
                // Route the directions and pass the response to a function to create
                // markers for each step.
                if (status === 'OK') {
                    response.routes[0].legs[0].steps[0].transit = null;
                    directionsDisplay.setDirections(response);
                    showSteps(response, markerArray, map);
                } else {
                    window.alert('Directions request failed due to ' + status);
                }
            });
        }

        function showSteps(directionResult, markerArray, map) {
            // For each step, place a marker, and add the text to the marker's infowindow.
            // Also attach the marker to an array so we can keep track of it and remove it
            // when calculating new routes.
            var myRoute = directionResult.routes[0].legs[0];
            for (var i = 0; i < myRoute.steps.length; i++) {
                var marker = markerArray[i] = markerArray[i] || new google.maps.Marker;
                marker.setMap(map);
                marker.setPosition(myRoute.steps[i].start_location);
            }
        }
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBa-LkwNN3X8Iz9DR948QSa1k1qNzWtYS8&callback=initMap"
        async defer></script>
</body>
</html>
<!--

Great, you found me!

Let me tell you a story about Wahlkampf.
Wahlkampf is one of the best things that could ever happen to you.
It's the possibility to fight for an idea you think is right and good and makes the world a better place.
It's the possibility to fight without weapons and blood, but rather with ideas and words.
It's the possibility to find a tribe of like-minded people and engage with them in the greatest challenge of our time,
of every time: To hopefully contribute just a little bit to the betterment of the world.

So what does Wahlkampf feel like?

It's Wednesday, 4th October 8:44pm. You listen to Southern Gothic and are at the beginning of yet another epic journey.
Create an awesome final website for the election campaign. A live coverage of the last 36 hours of the top candidate
of your party.

1. Stationen
2. Challenges
2a. Forms
2b. Workflows
3. Zugticket
4. Live-Videos
5. Hashtagstream
6. Styling
7. Heatmap - https://developers.google.com/maps/documentation/javascript/heatmaplayer


-->
<!DOCTYPE html>
<html>
<head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" href="stylesheet.css">
    <script src="http://code.jquery.com/jquery-latest.min.js"
            type="text/javascript"></script>
    <style>

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        .map-box {
            width: 200px;
        }
    </style>
</head>
<body>
<div id="map-container">
<div id="map"></div>
<div id="countdown-overlay" style="display:none">
    <div class="overlay-middle">
        <div style="text-align:center;">
            <div id="countdown"></div>
            <p>Der längste Wahlabschluss Österreichs. Sei live dabei, wenn Matthias Strolz und Irmgard Griss ab Donnerstag Abend 36 Stunden lang auf Tour gehen und Menschen in ganz Österreich treffen.</p
        </div>
    </div>
</div>
</div>
<script>// <![CDATA[
function formatted_number(number){
    return ("0" + number).slice(-2);
}

$(function(){
    var calcNewYear = setInterval(function(){

        date_target = new Date(); //new Date(2017 , 0, 30);
        date_target.setUTCFullYear(2017);
        date_target.setUTCMonth(9);
        date_target.setUTCDate(12);
        date_target.setUTCHours(20);
        date_target.setUTCMinutes(30);
        date_target.setUTCSeconds(0);
        date_now = new Date();
        diff_in_milliseconds = date_target - date_now;
        seconds = Math.floor(diff_in_milliseconds/1000);
        minutes = Math.floor(seconds/60);
        hours = Math.floor(minutes/60);
        days = Math.floor(hours/24);
        hours = hours - (days*24);
        minutes = minutes - days*24*60 - hours*60;
        seconds = seconds - days*24*60*60 - hours*60*60 - minutes*60;

        $("#countdown").html("<h1 style=\"font-size:72pt\">" + days + ":" + formatted_number(hours) + ":" + formatted_number(minutes) + ":" + formatted_number(seconds) + "</h1>");
    },1000);
});
// ]]></script>
<script>

    var imagePathPrefix = "";
    var imagePathBubble = "bubble32px.png";


    var map;
    function initMap() {

        var markerArray = [];

        var imageBubble = {
            url: imagePathPrefix + imagePathBubble,
            anchor: new google.maps.Point(2,29)
        };

        map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: 47.6746209, lng: 13.5},
            zoom: 8,
            draggable: false,
            minZoom: 7
        });

        //                                                                                                              Focus

        var refocus = function(){
            var bounds = new google.maps.LatLngBounds(
                    new google.maps.LatLng(46.373874, 9.533314),
                    new google.maps.LatLng(49.012635, 17.160764)
            );
            map.fitBounds(bounds);
        };

        refocus();

        $(window).resize(function(){
            //var center = map.getCenter();
            google.maps.event.trigger(map, "resize");
            refocus();
        });

        //                                                                                                              FUSION TABLE / COUNTRY BORDER

        var world_geometry = new google.maps.FusionTablesLayer({
            query: {
                select: 'geometry',
                from: '11fryZLw__OBjsjF8itWw-ZQimwcCzuhLKcaaozfP'
            },
            styles: [{
                    polygonOptions: {
                        fillColor: "#ffffff",
                        fillOpacity: 0.2,
                        strokeColor: "#ffffff",
                        strokeOpacity: 0.2,
                        strokeWeight: 6
                    }
                }
            ],
            map: map,
            suppressInfoWindows: true
        });

        //                                                                                                              CONTROLS
/*
        // Create a div to hold the control.
        var controlDiv = document.createElement('div');

        var controlUI = document.createElement('div');
        controlUI.style.backgroundColor = '#fff';
        controlUI.style.border = '2px solid #fff';
        controlUI.style.cursor = 'pointer';
        controlUI.style.marginBottom = '22px';
        controlUI.style.textAlign = 'center';
        controlUI.style.height = "100vh";
        controlUI.title = 'Click to recenter the map';
        controlDiv.appendChild(controlUI);

        var controlText = document.createElement('div');
        controlText.style.color = 'rgb(25,25,25)';
        controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
        controlText.style.fontSize = '16px';
        controlText.style.lineHeight = '38px';
        controlText.style.paddingLeft = '5px';
        controlText.style.paddingRight = '5px';
        controlText.innerHTML = 'Center Map wooop woop foooo';
        controlUI.appendChild(controlText);

        controlDiv.index = 1;
        map.controls[google.maps.ControlPosition.TOP_LEFT].push(controlDiv);

        /**/

        //                                                                                                              STYLES
        var styles = [

            {
                "featureType": "administrative",
                "elementType": "labels.text.fill",
                "stylers": [
                    {
                        "color": "#E84188"
                    }
                ]
            },
            {
                "featureType": "administrative.land_parcel",
                "elementType": "all",
                "stylers": [
                    {
                        "saturation": "12"
                    }
                ]
            },

            {
                "featureType": "landscape.man_made",
                "elementType": "all",
                "stylers": [
                    {
                        "color": "#E8E8E8"
                    }
                ]
            },
            {
                "featureType": "landscape.natural",
                "elementType": "all",
                "stylers": [
                    {
                        "color": "#f2f2f2"
                    }
                ]
            },

            {
                "featureType": "poi",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "poi.attraction",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "visibility": "off"
                    },
                    {
                        "color": "#000000"
                    },
                ]
            },
            {
                "featureType": "poi.attraction",
                "elementType": "labels.text.fill",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "color": "#8F8F8F"
                    },
                ]
            },
            {
                "featureType": "poi.attraction",
                "elementType": "labels.text.stroke",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "poi.business",
                "elementType": "labels.text",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "color": "#000000"
                    }
                ]
            },
            {
                "featureType": "poi.business",
                "elementType": "labels.text.fill",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "color": "#000000"
                    }
                ]
            },
            {
                "featureType": "poi.business",
                "elementType": "labels.text.stroke",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "poi.government",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "saturation": "-100"
                    }
                ]
            },
            {
                "featureType": "poi.medical",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "saturation": "-100"
                    }
                ]
            },
            {
                "featureType": "poi.park",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "saturation": "-65"
                    },
                    {
                        "lightness": "30"
                    }
                ]
            },
            {
                "featureType": "poi.place_of_worship",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "on"
                    }
                ]
            },
            {
                "featureType": "poi.place_of_worship",
                "elementType": "labels.text",
                "stylers": [
                    {
                        "visibility": "on"
                    }
                ]
            },
            {
                "featureType": "poi.place_of_worship",
                "elementType": "labels.text.fill",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "color": "#8F8F8F"
                    }

                ]
            },
            {
                "featureType": "poi.place_of_worship",
                "elementType": "labels.text.stroke",
                "stylers": [
                    {
                        "visibility": "on"
                    }

                ]
            },
            {
                "featureType": "poi.place_of_worship",
                "elementType": "labels.icon",
                "stylers": [
                    {
                        "visibility": "on"
                    }
                ]
            },
            {
                "featureType": "poi.school",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "saturation": "-100"
                    }
                ]
            },
            {
                "featureType": "poi.sports_complex",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "saturation": "-100"
                    }
                ]
            },
            {
                "featureType": "poi.sports_complex",
                "elementType": "labels.text.fill",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "color": "#8F8F8F"
                    }
                ]
            },
            {
                "featureType": "poi.sports_complex",
                "elementType": "labels.text.stroke",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "road",
                "elementType": "all",
                "stylers": [
                    {
                        "saturation": -100
                    },
                    {
                        "lightness": 45
                    }
                ]
            },
            {
                "featureType": "road",
                "elementType": "labels.text.fill",
                "stylers": [
                    {
                        "color": "#8F8F8F"
                    }
                ]
            },
            {
                "featureType": "road.highway",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "simplified"
                    }
                ]
            },
            {
                "featureType": "road.arterial",
                "elementType": "labels.icon",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "transit",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "transit.line",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "weight": "1"
                    }
                ]
            },
            {
                "featureType": "transit.station.airport",
                "elementType": "geometry",
                "stylers": [
                    {
                        "visibility": "on"
                    }
                ]
            },
            {
                "featureType": "transit.station.rail",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "color": "#ff0000"
                    },
                    {
                        "weight": "1"
                    }
                ]
            },
            {
                "featureType": "transit.station.rail",
                "elementType": "labels.text",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "hue": "#ff0000"
                    }
                ]
            },
            {
                "featureType": "transit.station.rail",
                "elementType": "labels.icon",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "water",
                "elementType": "all",
                "stylers": [
                    {
                        "color": "#d4e4eb"
                    },
                    {
                        "visibility": "on"
                    }
                ]
            },
            {
                "featureType": "water",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "color": "#cbdae2"
                    }
                ]
            },
            {
                "featureType": "water",
                "elementType": "labels.text.fill",
                "stylers": [
                    {
                        "color": "#9b7f7f"
                    }
                ]
            },
            {
                "featureType": "water",
                "elementType": "labels.text.stroke",
                "stylers": [
                    {
                        "color": "#dfc9c9"
                    }
                ]
            }
            /*{
             "stylers": [
             {
             "hue": "#ff61a6"
             },
             {
             "visibility": "on"
             },
             {
             "invert_lightness": true
             },
             {
             "saturation": 40
             },
             {
             "lightness": 10
             }
             ]
             },*/
            /*{
             "featureType": "all",
             "stylers": [
             { "color": "#C0C0C0" }
             ]
             },*/
            /* {
             featureType: "transit",
             elements: "all",
             stylers: [
             {
             //visibility: "off",
             color: "#e84188"
             }
             ]
             },*/
        ];

        map.setOptions({styles: styles});

        //                                                                                                              GEOCODING
/*
        var geocoder = new google.maps.Geocoder();
        var address = "Klagenfurt";
        geocoder.geocode({'address': address}, function(results, status) {
            if (status === 'OK') {
                var foo = results[0].geometry.location;
                var lat = foo.lat();
                var lng = foo.lng();
                resultsMap.setCenter(foo);
                var marker = new google.maps.Marker({
                    map: resultsMap,
                    position: results[0].geometry.location
                });
            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        });/**/

        //                                                                                                              POIS

        var position_wien = {
            title: "Wien",
            position: {lat: 48.2081743, lng: 16.3738189},
            html: '<div class="map-box"><h2>Mat legt los</h2><p>36 Stunden durch ganz Österreich und du bist live dabei.</p><a href="https://neos.eu">Zur Challenge</a></div>'
            //, image: imageBubble
        };
        var position_dornbirn = { // Challenge
            title: "Dornbirn",
            position: {lat: 47.4124, lng: 9.74379},
            html: '<p>test2</p>'
            //, image: imageBubble
        };
        var position_innsbruck = { // challenge 2
            title: "Innsbruck",
            position: {lat: 47.2692124, lng: 11.404102400000056},
            html: '<p>test5</p>'
            //, image: imagePathStrolz2
        };
        var position_salzburg = {
            title: "Salzburg",
            position: {lat: 47.80949, lng: 13.05501},
            html: '<p>test3</p>'
            //, image: imageBubble
        };
        var position_linz = { // challenge 3
            title: "Linz",
            position: {lat: 48.30694, lng: 14.285830000000033},
            html: '<p>test5</p>'
            //, image: imagePathGrissStrolz
        };
        var position_graz = {
            title: "Graz",
            position: {lat: 47.070714, lng: 15.439503999999943},
            html: '<p>test4</p>'
            //, image: imagePathGriss1
        };
        var position_stpoelten = {
            title: "St. Pölten",
            position: {lat: 48.20353, lng: 15.63817},
            html: '<p>test5</p>'
            //, image: imagePathGrissStrolz
        };
        var position_klagenfurt = {
            title: "Klagenfurt",
            position: {lat: 46.6364598, lng: 14.312224600000036},
            html: '<p>test5</p>'
            //, image: imagePathGrissStrolz
        };


        var positions = [position_dornbirn, position_salzburg, position_graz, position_stpoelten, position_innsbruck, position_linz, position_wien, position_klagenfurt];

        var infowindow;

        var markers = [];
        for(var i = 0; i < positions.length; i++){
            var marker= new google.maps.Marker({
                position: positions[i].position,
                map: map,
                //title: positions[i].title,
                icon: positions[i].image
            });

            marker.addListener('click', function() {
                if(infowindow != null){
                    infowindow.close();
                }
                infowindow = new google.maps.InfoWindow({content:this.content});
                infowindow.open(map, this);
            });

            marker.content = positions[i].html;

            markers[i] = marker;
        }



        var travelParts = [
            {
                source: position_graz,
                target: position_salzburg
            },
            {
                source: position_dornbirn,
                target: position_innsbruck
            },
            {
                source: position_innsbruck,
                target: position_salzburg
            },
            {
                source: position_salzburg,
                target: position_linz
            },
            {
                source: position_linz,
                target: position_stpoelten
            },
            {
                source: position_stpoelten,
                target: position_wien
            },
            {
                source: position_wien,
                target: position_graz
            },
            {
                source: position_klagenfurt,
                target: position_graz
            },
            {
                source: position_klagenfurt,
                target: position_innsbruck
            }
        ];


        var lineSymbol = {
            path: 'M 0,-1 0,1',
            strokeOpacity: 1,
            scale: 4
        };

        var lines = [];

        for (i = 0; i < travelParts.length; i++) {

            var sourcePath = new google.maps.LatLng(travelParts[i].source.position.lat, travelParts[i].source.position.lng);
            var targetPath = new google.maps.LatLng(travelParts[i].target.position.lat, travelParts[i].target.position.lng);

            var line = new google.maps.Polyline({
                //
                path: [sourcePath, targetPath],
                strokeOpacity: 0.0,
                strokeWeight: 2,
                strokeColor: '#e84188',
                geodesic: true,
                icons: [{
                    icon: lineSymbol,
                    offset: '100%',
                    repeat: '30px'
                }]
            });
            line.setMap(map);
            lines.push(line);
        } //end of for loop
        // alert(lines.length);

        var animate = function() {
            var count = 0;
            offsetId = window.setInterval(function () {
                count = (count + 1) % 2000;
                for (var i = 0; i < lines.length; i++) {
                    var icons = lines[i].get('icons');
                    icons[0].offset = (count / 2) + '%';
                    lines[i].set('icons', icons);
                }
            }, 200);
        };

        animate();



//                                                                                                                      Travel Marker
        /*
        var marker = new google.maps.Marker({
            map: map,
            position: position_wien.position,
            icon: "grissstrolz.png"
        });



        for(var i = 0; i < travelParts.length; i++){
            // store a LatLng for each step of the animation
            var position_source = travelParts[i].source;
            var position_target = travelParts[i].target;

            var frames = [];
            for (var percent = 0; percent < 1; percent += 0.01) {
                var curLat = position_source.position.lat + percent * (position_target.position.lat - position_source.position.lat);
                var curLng = position_source.position.lng + percent * (position_target.position.lng - position_source.position.lng);
                frames.push(new google.maps.LatLng(curLat, curLng));
            }
            travelParts[i].frames = frames;
        }

        var move = function(marker, currentTravelPart, currentFrame, wait) {
            marker.setPosition(travelParts[currentTravelPart].frames[currentFrame]);
            if(currentFrame == travelParts[currentTravelPart].frames.length-1) {
                currentTravelPart++;
                if(currentTravelPart >= travelParts.length){
                    currentTravelPart = 0;
                }
                currentFrame = 0;
            }

            setTimeout(function() {
                move(marker, currentTravelPart, currentFrame+1, wait);
            }, wait);
        }

        // begin animation, send back to origin after completion
        move(marker, 0, 0, 20);

*/

        //                                                                                                              Routing
        /*
         var directionsService = new google.maps.DirectionsService;
         var directionsDisplay1 = new google.maps.DirectionsRenderer({map: map});
         var directionsDisplay2 = new google.maps.DirectionsRenderer({map: map});
         var directionsDisplay3 = new google.maps.DirectionsRenderer({map: map});
         var directionsDisplay4 = new google.maps.DirectionsRenderer({map: map});
         var directionsDisplay5 = new google.maps.DirectionsRenderer({map: map});
         var directionsDisplay6 = new google.maps.DirectionsRenderer({map: map});

         // Display the route between the initial start and end selections.
         window.setTimeout(function(){
         calculateAndDisplayRoute(
         directionsDisplay1, "Wien, Österreich", "Dornbirn, Österreich");

         }, 1000);

         window.setTimeout(function(){

         calculateAndDisplayRoute(
         directionsDisplay2, "Dornbirn, Österreich", "Innsbruck, Österreich");

         }, 2000);
         window.setTimeout(function(){

         calculateAndDisplayRoute(
         directionsDisplay3, "Innsbruck, Österreich", "Salzburg, Österreich");

         }, 3000);
         window.setTimeout(function(){

         calculateAndDisplayRoute(
         directionsDisplay4, "Salzburg, Österreich", "Linz, Österreich");

         }, 4000);
         window.setTimeout(function(){

         calculateAndDisplayRoute(
         directionsDisplay5, "Linz, Österreich", "Wien, Österreich");

         }, 5000);

         window.setTimeout(function(){

         calculateAndDisplayRoute(
         directionsDisplay6, "Graz, Österreich", "Salzburg, Österreich");

         }, 6000);



         function calculateAndDisplayRoute(directionsDisplay, origin, destination, waypoints) {
         // First, remove any existing markers from the map.
         for (var i = 0; i < markerArray.length; i++) {
         markerArray[i].setMap(null);
         }

         // Retrieve the start and end locations and create a DirectionsRequest using
         // WALKING directions.
         directionsService.route({
         origin: origin,
         destination: destination,
         waypoints: waypoints,
         travelMode: 'TRANSIT',
         transitOptions: {modes:["RAIL"]}
         }, function(response, status) {
         // Route the directions and pass the response to a function to create
         // markers for each step.
         if (status === 'OK') {
         response.routes[0].legs[0].steps[0].transit = null;
         directionsDisplay.setDirections(response);
         showSteps(response, markerArray, map);
         } else {
         window.alert('Directions request failed due to ' + status);
         }
         });
         }

         function showSteps(directionResult, markerArray, map) {
         // For each step, place a marker, and add the text to the marker's infowindow.
         // Also attach the marker to an array so we can keep track of it and remove it
         // when calculating new routes.
         var myRoute = directionResult.routes[0].legs[0];
         for (var i = 0; i < myRoute.steps.length; i++) {
         var marker = markerArray[i] = markerArray[i] || new google.maps.Marker;
         marker.setMap(map);
         marker.setPosition(myRoute.steps[i].start_location);
         }
         }

         */
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBa-LkwNN3X8Iz9DR948QSa1k1qNzWtYS8&callback=initMap"
        async defer></script>
</body>
</html>